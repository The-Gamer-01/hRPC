# 通信协议用处
协议(Protocol)是一个非常广泛的概念,RPC被称为远程过程调用协议;
协议是 RPC 的核心，它规范了数据在网络中的传输内容和格式。除必须的请求、响应数据外，通常还会包含额外控制数据，如单次请求的序列化方式、超时时间、压缩方式和鉴权信息等。
协议一般包括以下部分:
1. 数据交换格式(序列化方式):定义RPC的请求和响应对象在网络传输中的字节流内容
2. 协议结构:定义包含字段列表和各字段语义以及不同字段的排列方式

# hRPC的通信协议选择
在RPC领域中,通信协议一般需要考虑以下内容:
1. 通用性: 统一的二进制格式,跨语言,跨平台,多传输协议支持
2. 扩展性: 协议增加字段,升级,支持用户扩展和附加业务元数据
3. 性能: 越高越好
4. 穿透性: 能被各种中断设备识别和转发

常见的RPC的通信协议如下:
6. HTTP
7. 自定义协议

此两种方法各有优劣,此处我分别进行分析
## HTTP通信协议
优点:
1. 可扩展性高
2. 通用性高
3. 云原生时代事实协议标准为HTTP2

缺点:
1. 过多冗余字段,例如Host,Method等,导致包较大
2. header更易于人类阅读,但是性能极差
3. 无直接Server Push支持

## 自定义协议
优点:
1. 可高度定制化,性能更高;对于性能更好;
2. 可自己进行扩展通用性

缺点:
1. 穿透性差,相当于只能用在内网
2. 通用性一般,大量内容需要自己实现

## hRPC的通信协议设计
此版本通信协议设计有少许问题,暂时先放个图,等以后在更新
![hrpc protocol](https://user-images.githubusercontent.com/58755323/186490904-efc147b5-027a-4aef-8590-c6e8093b3b4c.png)
